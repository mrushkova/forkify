!function(){var e={};var t=function(t){var n=e[t];if(null==n)throw new Error("Could not resolve bundle with id "+t);return n};(function(t){for(var n=Object.keys(t),r=0;r<n.length;r++)e[n[r]]=t[n[r]]})(JSON.parse('{"f51d4b778cace59a":"controller.51faebf0.js","11b33857a810eab5":"icons.c781f215.svg"}'));function n(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function r(e){return function(){var t=this,r=arguments;return new Promise((function(o,i){var a=e.apply(t,r);function c(e){n(a,o,i,c,u,"next",e)}function u(e){n(a,o,i,c,u,"throw",e)}c(void 0)}))}}var o=function(e){return new Promise((function(t,n){setTimeout((function(){n(new Error("Request took too long! Timeout after ".concat(e," second")))}),1e3*e)}))},i=function(){var e=r(regeneratorRuntime.mark((function e(t){var n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Promise.race([fetch(t),o(10)]);case 3:return n=e.sent,e.next=6,n.json();case 6:if(r=e.sent,n.ok){e.next=9;break}throw new Error("".concat(r.message," (").concat(r.status,")"));case 9:return e.abrupt("return",r);case 12:throw e.prev=12,e.t0=e.catch(0),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}(),a=function(){var e=r(regeneratorRuntime.mark((function e(t,n){var r,i,a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,r=fetch(t,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}),e.next=4,Promise.race([r,o(10)]);case 4:return i=e.sent,e.next=7,i.json();case 7:if(a=e.sent,i.ok){e.next=10;break}throw new Error("".concat(a.message," (").concat(a.status,")"));case 10:return e.abrupt("return",a);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t,n){return e.apply(this,arguments)}}();function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(r=(a=c.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==c.return||c.return()}finally{if(o)throw i}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function l(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){s(i,r,o,a,c,"next",e)}function c(e){s(i,r,o,a,c,"throw",e)}a(void 0)}))}}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h,y={recipe:{},search:{query:"",results:[],page:1,resultsPerPage:10},bookmarks:[]},v=function(e){var t=e.data.recipe;return p({id:t.id,title:t.title,publisher:t.publisher,sourceUrl:t.source_url,image:t.image_url,servings:t.servings,cookingTime:t.cooking_time,ingredients:t.ingredients},t.key&&{key:t.key})},m=function(){var e=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i("".concat("https://forkify-api.herokuapp.com/api/v2/recipes/","/").concat(t,"?key=").concat("e090341e-609e-4869-a802-923233d2b552"));case 3:n=e.sent,y.recipe=v(n),y.bookmarks.some((function(e){return e.id===t}))?y.recipe.bookmarked=!0:y.recipe.bookmarked=!1,e.next=11;break;case 8:throw e.prev=8,e.t0=e.catch(0),e.t0;case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),b=function(){var e=l(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y.search.query=t,e.next=4,i("".concat("https://forkify-api.herokuapp.com/api/v2/recipes/","?search=").concat(t,"&key=").concat("e090341e-609e-4869-a802-923233d2b552"));case 4:n=e.sent,y.search.results=n.data.recipes.map((function(e){return p({id:e.id,title:e.title,publisher:e.publisher,image:e.image_url},e.key&&{key:e.key})})),y.search.page=1,e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y.search.page;y.search.page=e;var t=(e-1)*y.search.resultsPerPage,n=e*y.search.resultsPerPage;return y.search.results.slice(t,n)},_=function(){localStorage.setItem("bookmarks",JSON.stringify(y.bookmarks))},w=function(e){y.bookmarks.push(e),e.id===y.recipe.id&&(y.recipe.bookmarked=!0),_()};(h=localStorage.getItem("bookmarks"))&&(y.bookmarks=JSON.parse(h));var k,O=function(){var e=l(regeneratorRuntime.mark((function e(t){var n,r,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=Object.entries(t).filter((function(e){return e[0].startsWith("ingredient")&&""!==e[1]})).map((function(e){var t=e[1].split(",").map((function(e){return e.trim()}));if(3!==t.length)throw new Error("Wrong ingredient fromat! Please use the correct format :)");var n=c(t,3),r=n[0];return{quantity:r?+r:null,unit:n[1],description:n[2]}})),r={title:t.title,source_url:t.sourceUrl,image_url:t.image,publisher:t.publisher,cooking_time:+t.cookingTime,servings:+t.servings,ingredients:n},e.next=5,a("".concat("https://forkify-api.herokuapp.com/api/v2/recipes/","?key=").concat("e090341e-609e-4869-a802-923233d2b552"),r);case 5:o=e.sent,y.recipe=v(o),w(y.recipe),e.next=13;break;case 10:throw e.prev=10,e.t0=e.catch(0),e.t0;case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),S=null;var j,P=function(){return S||(S=function(){try{throw new Error}catch(t){var e=(""+t.stack).match(/(https?|file|ftp):\/\/[^)\n]+/g);if(e)return(""+e[0]).replace(/^((?:https?|file|ftp):\/\/.+)\/[^/]+$/,"$1")+"/"}return"/"}()),S},E=t;function R(e){if(""===e)return".";var t="/"===e[e.length-1]?e.slice(0,e.length-1):e,n=t.lastIndexOf("/");return-1===n?".":t.slice(0,n)}function x(e,t){if(e===t)return"";var n=e.split("/");"."===n[0]&&n.shift();var r,o,i=t.split("/");for("."===i[0]&&i.shift(),r=0;(r<i.length||r<n.length)&&null==o;r++)n[r]!==i[r]&&(o=r);var a=[];for(r=0;r<n.length-o;r++)a.push("..");return i.length>o&&a.push.apply(a,i.slice(o)),a.join("/")}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(j=function(e,t){return x(R(E(e)),E(t))})._dirname=R,j._relative=x,k=P()+j("f51d4b778cace59a","11b33857a810eab5");var M,A,T,H=(M=k)&&M.__esModule?M.default:M,q=function(){function e(){var t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r=void 0,(n="_data")in(t=this)?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r}var t,n,r;return t=e,(n=[{key:"render",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(!e||Array.isArray(e)&&0===e.length)return this.renderError();this._data=e;var n=this._generateMarkup();if(!t)return n;this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",n)}},{key:"update",value:function(e){this._data=e;var t=this._generateMarkup(),n=document.createRange().createContextualFragment(t),r=Array.from(n.querySelectorAll("*")),o=Array.from(this._parentElement.querySelectorAll("*"));r.forEach((function(e,t){var n,r=o[t];e.isEqualNode(r)||""===(null===(n=e.firstChild)||void 0===n?void 0:n.nodeValue.trim())||(r.textContent=e.textContent),e.isEqualNode(r)||Array.from(e.attributes).forEach((function(e){return r.setAttribute(e.name,e.value)}))}))}},{key:"_clear",value:function(){this._parentElement.innerHTML=""}},{key:"renderSpinner",value:function(){var e='\n    <div class="spinner">\n      <svg>\n        <use href="'.concat(H,'#icon-loader"></use>\n      </svg>\n    </div> ');this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",e)}},{key:"renderError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._errMessage,t='<div class="error">\n      <div>\n        <svg>\n          <use href="'.concat(H,'#icon-alert-triangle"></use>\n        </svg>\n      </div>\n      <p>').concat(e,"</p>\n    </div>");this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}},{key:"renderMessage",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._message,t='<div class="message">\n      <div>\n        <svg>\n          <use href="'.concat(H,'#icon-smile"></use>\n        </svg>\n      </div>\n      <p>').concat(e,"</p>\n    </div>");this._clear(),this._parentElement.insertAdjacentHTML("afterbegin",t)}}])&&F(t.prototype,n),r&&F(t,r),e}();Fraction=function(e,t){if(void 0!==e&&t)"number"==typeof e&&"number"==typeof t?(this.numerator=e,this.denominator=t):"string"==typeof e&&"string"==typeof t&&(this.numerator=parseInt(e),this.denominator=parseInt(t));else if(void 0===t)if(num=e,"number"==typeof num)this.numerator=num,this.denominator=1;else if("string"==typeof num){var n,r,o=num.split(" ");if(o[0]&&(n=o[0]),o[1]&&(r=o[1]),n%1==0&&r&&r.match("/"))return new Fraction(n).add(new Fraction(r));if(!n||r)return;if("string"==typeof n&&n.match("/")){var i=n.split("/");this.numerator=i[0],this.denominator=i[1]}else{if("string"==typeof n&&n.match("."))return new Fraction(parseFloat(n));this.numerator=parseInt(n),this.denominator=1}}this.normalize()},Fraction.prototype.clone=function(){return new Fraction(this.numerator,this.denominator)},Fraction.prototype.toString=function(){if("NaN"===this.denominator)return"NaN";var e=this.numerator/this.denominator>0?Math.floor(this.numerator/this.denominator):Math.ceil(this.numerator/this.denominator),t=this.numerator%this.denominator,n=this.denominator,r=[];return 0!=e&&r.push(e),0!=t&&r.push((0===e?t:Math.abs(t))+"/"+n),r.length>0?r.join(" "):0},Fraction.prototype.rescale=function(e){return this.numerator*=e,this.denominator*=e,this},Fraction.prototype.add=function(e){var t=this.clone();return e=e instanceof Fraction?e.clone():new Fraction(e),td=t.denominator,t.rescale(e.denominator),e.rescale(td),t.numerator+=e.numerator,t.normalize()},Fraction.prototype.subtract=function(e){var t=this.clone();return e=e instanceof Fraction?e.clone():new Fraction(e),td=t.denominator,t.rescale(e.denominator),e.rescale(td),t.numerator-=e.numerator,t.normalize()},Fraction.prototype.multiply=function(e){var t=this.clone();if(e instanceof Fraction)t.numerator*=e.numerator,t.denominator*=e.denominator;else{if("number"!=typeof e)return t.multiply(new Fraction(e));t.numerator*=e}return t.normalize()},Fraction.prototype.divide=function(e){var t=this.clone();if(e instanceof Fraction)t.numerator*=e.denominator,t.denominator*=e.numerator;else{if("number"!=typeof e)return t.divide(new Fraction(e));t.denominator*=e}return t.normalize()},Fraction.prototype.equals=function(e){e instanceof Fraction||(e=new Fraction(e));var t=this.clone().normalize();e=e.clone().normalize();return t.numerator===e.numerator&&t.denominator===e.denominator},Fraction.prototype.normalize=(A=function(e){return"number"==typeof e&&(e>0&&e%1>0&&e%1<1||e<0&&e%-1<0&&e%-1>-1)},T=function(e,t){if(t){var n=Math.pow(10,t);return Math.round(e*n)/n}return Math.round(e)},function(){if(A(this.denominator)){var e=T(this.denominator,9),t=Math.pow(10,e.toString().split(".")[1].length);this.denominator=Math.round(this.denominator*t),this.numerator*=t}A(this.numerator)&&(e=T(this.numerator,9),t=Math.pow(10,e.toString().split(".")[1].length),this.numerator=Math.round(this.numerator*t),this.denominator*=t);var n=Fraction.gcf(this.numerator,this.denominator);return this.numerator/=n,this.denominator/=n,(this.numerator<0&&this.denominator<0||this.numerator>0&&this.denominator<0)&&(this.numerator*=-1,this.denominator*=-1),this}),Fraction.gcf=function(e,t){var n=[],r=Fraction.primeFactors(e),o=Fraction.primeFactors(t);return r.forEach((function(e){var t=o.indexOf(e);t>=0&&(n.push(e),o.splice(t,1))})),0===n.length?1:function(){var e,t=n[0];for(e=1;e<n.length;e++)t*=n[e];return t}()},Fraction.primeFactors=function(e){for(var t=Math.abs(e),n=[],r=2;r*r<=t;)t%r==0?(n.push(r),t/=r):r++;return 1!=t&&n.push(t),n};var D=Fraction;function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?z(e):t}function z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=document.querySelector(".recipe"),Q=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(i,e);var t,n,r,o=W(i);function i(){var e;I(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return $(z(e=o.call.apply(o,[this].concat(n))),"_parentElement",B),$(z(e),"_errMessage","No recipes found for your query. Please try again!"),$(z(e),"_message",""),e}return t=i,(n=[{key:"addHandlerRender",value:function(e){["hashchange","load"].forEach((function(t){return window.addEventListener(t,e)}))}},{key:"addHandlerUpdateServings",value:function(e){this._parentElement.addEventListener("click",(function(t){var n=t.target.closest(".btn--update-servings");if(n){var r=+n.dataset.updateTo;r>0&&e(r)}}))}},{key:"addHandlerAddBookmark",value:function(e){this._parentElement.addEventListener("click",(function(t){t.target.closest(".btn--bookmark")&&e()}))}},{key:"_generateMarkup",value:function(){return'<figure class="recipe__fig">\n    <img src="'.concat(this._data.image,'" alt="').concat(this._data.title,'" class="recipe__img" />\n    <h1 class="recipe__title">\n      <span>').concat(this._data.title,'</span>\n    </h1>\n  </figure>\n\n  <div class="recipe__details">\n    <div class="recipe__info">\n      <svg class="recipe__info-icon">\n        <use href="').concat(H,'#icon-clock"></use>\n      </svg>\n      <span class="recipe__info-data recipe__info-data--minutes">').concat(this._data.cookingTime,'</span>\n      <span class="recipe__info-text">minutes</span>\n    </div>\n    <div class="recipe__info">\n      <svg class="recipe__info-icon">\n        <use href="').concat(H,'#icon-users"></use>\n      </svg>\n      <span class="recipe__info-data recipe__info-data--people">').concat(this._data.servings,'</span>\n      <span class="recipe__info-text">servings</span>\n\n      <div class="recipe__info-buttons">\n        <button class="btn--tiny btn--update-servings" data-update-to="').concat(this._data.servings-1,'">\n          <svg>\n            <use href="').concat(H,'#icon-minus-circle"></use>\n          </svg>\n        </button>\n        <button class="btn--tiny btn--update-servings" data-update-to="').concat(this._data.servings+1,'">\n          <svg>\n            <use href="').concat(H,'#icon-plus-circle"></use>\n          </svg>\n        </button>\n      </div>\n    </div>\n\n    <div class="recipe__user-generated ').concat(this._data.key?"":"hidden",'">\n      <svg>\n        <use href="').concat(H,'#icon-user"></use>\n      </svg>\n    </div>\n    <button class="btn--round btn--bookmark">\n      <svg class="">\n        <use href="').concat(H,"#icon-bookmark").concat(this._data.bookmarked?"-fill":"",'"></use>\n      </svg>\n    </button>\n  </div>\n\n  <div class="recipe__ingredients">\n    <h2 class="heading--2">Recipe ingredients</h2>\n    <ul class="recipe__ingredient-list">\n    ').concat(this._data.ingredients.map(this._generateMarkupIngredient).join(" "),'\n      \n\n    </ul>\n  </div>\n\n  <div class="recipe__directions">\n    <h2 class="heading--2">How to cook it</h2>\n    <p class="recipe__directions-text">\n      This recipe was carefully designed and tested by\n      <span class="recipe__publisher">').concat(this._data.publisher,'</span>. Please check out\n      directions at their website.\n    </p>\n    <a\n      class="btn--small recipe__btn"\n      href="').concat(this._data.sourceUrl,'"\n      target="_blank"\n    >\n      <span>Directions</span>\n      <svg class="search__icon">\n        <use href="').concat(H,'#icon-arrow-right"></use>\n      </svg>\n    </a>\n  </div>')}},{key:"_generateMarkupIngredient",value:function(e){return'<li class="recipe__ingredient">\n      <svg class="recipe__icon">\n        <use href="'.concat(H,'#icon-check"></use>\n      </svg>\n      <div class="recipe__quantity">').concat(e.quantity?new D(e.quantity).toString():"",'</div>\n      <div class="recipe__description">\n        <span class="recipe__unit">').concat(e.unit,"</span>\n        ").concat(e.description,"\n      </div>\n    </li>")}}])&&L(t.prototype,n),r&&L(t,r),i}(q));function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var K=document.querySelector(".search"),X=document.querySelector(".search__field"),Y=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),G(this,"_parentElement",K),G(this,"_data",void 0)}var t,n,r;return t=e,(n=[{key:"_clearInput",value:function(){X.value=""}},{key:"getQuery",value:function(){var e=X.value;return this._clearInput(),e}},{key:"addHandlerSearch",value:function(e){this._parentElement.addEventListener("submit",(function(t){t.preventDefault(),e()}))}}])&&V(t.prototype,n),r&&V(t,r),e}());function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ee(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t){return(ne=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function re(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return oe(this,n)}}function oe(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?ie(e):t}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return(ae=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ue=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ne(e,t)}(i,e);var t,n,r,o=re(i);function i(){var e;ee(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ce(ie(e=o.call.apply(o,[this].concat(n))),"_parentElement",""),e}return t=i,(n=[{key:"_generateMarkup",value:function(){var e=window.location.hash.slice(1);return'\n    <li class="preview">\n    <a class="preview__link '.concat(this._data.id===e?"preview__link--active":"",'" href="#').concat(this._data.id,'">\n      <figure class="preview__fig">\n        <img src="').concat(this._data.image,'" alt="').concat(this._data.title,'" />\n      </figure>\n      <div class="preview__data">\n        <h4 class="preview__title">').concat(this._data.title,'</h4>\n        <p class="preview__publisher">').concat(this._data.publisher,'</p>\n        <div class="preview__user-generated ').concat(this._data.key?"":"hidden",'">\n          <svg>\n            <use href="').concat(H,'#icon-user"></use>\n          </svg>\n        </div>\n      </div>\n    </a>\n  </li>')}}])&&te(t.prototype,n),r&&te(t,r),i}(q));function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function le(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e,t){return(pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function de(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ve(e);if(t){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return he(this,n)}}function he(e,t){return!t||"object"!==se(t)&&"function"!=typeof t?ye(e):t}function ye(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var be=document.querySelector(".results"),ge=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pe(e,t)}(i,e);var t,n,r,o=de(i);function i(){var e;le(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return me(ye(e=o.call.apply(o,[this].concat(n))),"_parentElement",be),me(ye(e),"_errMessage","No recipes found for your query. Please try again!"),me(ye(e),"_message",""),e}return t=i,(n=[{key:"_generateMarkup",value:function(){return this._data.map((function(e){return ue.render(e,!1)})).join("")}}])&&fe(t.prototype,n),r&&fe(t,r),i}(q));function _e(e){return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function we(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ke(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Oe(e,t){return(Oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ee(e);if(t){var o=Ee(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return je(this,n)}}function je(e,t){return!t||"object"!==_e(t)&&"function"!=typeof t?Pe(e):t}function Pe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ee(e){return(Ee=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xe=document.querySelector(".pagination"),Fe=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oe(e,t)}(i,e);var t,n,r,o=Se(i);function i(){var e;we(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Re(Pe(e=o.call.apply(o,[this].concat(n))),"_parentElement",xe),e}return t=i,(n=[{key:"addHandlerClick",value:function(e){this._parentElement.addEventListener("click",(function(t){var n=t.target.closest(".btn--inline");if(n){var r=+n.dataset.goto;e(r)}}))}},{key:"_generateMarkup",value:function(){var e=Math.ceil(this._data.results.length/this._data.resultsPerPage),t=this._data.page;return 1===t&&e>1?'\n    <button data-goto ="'.concat(t+1,'" class="btn--inline pagination__btn--next">\n      <span>Page ').concat(t+1,'</span>\n      <svg class="search__icon">\n        <use href="').concat(H,'#icon-arrow-right"></use>\n      </svg>\n    </button>'):t===e&&e>1?'<button data-goto ="'.concat(t-1,'" class="btn--inline pagination__btn--prev">\n      <svg class="search__icon">\n        <use href="').concat(H,'#icon-arrow-left"></use>\n      </svg>\n      <span>Page ').concat(t-1,"</span>\n    </button>"):t<e?'<button data-goto ="'.concat(t-1,'" class="btn--inline pagination__btn--prev">\n      <svg class="search__icon">\n        <use href="').concat(H,'#icon-arrow-left"></use>\n      </svg>\n      <span>Page ').concat(t-1,'</span>\n    </button>\n    <button data-goto ="').concat(t+1,'" class="btn--inline pagination__btn--next">\n      <span>Page ').concat(t+1,'</span>\n      <svg class="search__icon">\n        <use href="').concat(H,'#icon-arrow-right"></use>\n      </svg>\n    </button>'):""}}])&&ke(t.prototype,n),r&&ke(t,r),i}(q));function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ie(e);if(t){var o=Ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?Ce(e):t}function Ce(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ne=document.querySelector(".bookmarks__list"),We=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(i,e);var t,n,r,o=qe(i);function i(){var e;Ae(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Le(Ce(e=o.call.apply(o,[this].concat(n))),"_parentElement",Ne),Le(Ce(e),"_errMessage","No bookmarks yet. Find a nice recipe and bookmark it :)"),Le(Ce(e),"_message",""),e}return t=i,(n=[{key:"addHandlerRender",value:function(e){window.addEventListener("load",e)}},{key:"_generateMarkup",value:function(){return this._data.map((function(e){return ue.render(e,!1)})).join("")}}])&&Te(t.prototype,n),r&&Te(t,r),i}(q));function Ue(e){return(Ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ze(e){return function(e){if(Array.isArray(e))return Je(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Be(e,t){return(Be=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var o=Ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ve(this,n)}}function Ve(e,t){return!t||"object"!==Ue(t)&&"function"!=typeof t?Ge(e):t}function Ge(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return(Ke=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ye=document.querySelector(".upload"),Ze=document.querySelector(".add-recipe-window"),et=document.querySelector(".overlay"),tt=document.querySelector(".nav__btn--add-recipe"),nt=document.querySelector(".btn--close-modal"),rt=new(function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Be(e,t)}(i,e);var t,n,r,o=Qe(i);function i(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Xe(Ge(e=o.call(this)),"_parentElement",Ye),Xe(Ge(e),"_message","Recipe was successfully uploaded!"),e._addHandlerShowWindow(),e._addHandlerHideWindow(),e}return t=i,(n=[{key:"toogleWindow",value:function(){et.classList.toggle("hidden"),Ze.classList.toggle("hidden")}},{key:"_addHandlerShowWindow",value:function(){tt.addEventListener("click",this.toogleWindow.bind(this))}},{key:"_addHandlerHideWindow",value:function(){nt.addEventListener("click",this.toogleWindow.bind(this))}},{key:"_addHandlerUpload",value:function(e){this._parentElement.addEventListener("submit",(function(t){t.preventDefault();var n=ze(new FormData(Ye)),r=Object.fromEntries(n);e(r)}))}},{key:"_generateMarkup",value:function(){}}])&&$e(t.prototype,n),r&&$e(t,r),i}(q));function ot(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(e){return void n(e)}c.done?t(u):Promise.resolve(u).then(r,o)}function it(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){ot(i,r,o,a,c,"next",e)}function c(e){ot(i,r,o,a,c,"throw",e)}a(void 0)}))}}var at=function(){var e=it(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window.location.hash.slice(1)){e.next=4;break}return e.abrupt("return");case 4:return Q.renderSpinner(),ge.update(g()),We.update(y.bookmarks),e.next=9,m(t);case 9:Q.render(y.recipe),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),Q.renderError();case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(){return e.apply(this,arguments)}}(),ct=function(){var e=it(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,ge.renderSpinner(),t=Y.getQuery()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,b(t);case 7:ge.render(g()),Fe.render(y.search),e.next=13;break;case 11:e.prev=11,e.t0=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),ut=function(e){ge.render(g(e)),Fe.render(y.search)},st=function(e){!function(e){y.recipe.ingredients.forEach((function(t){t.quantity=t.quantity*e/y.recipe.servings})),y.recipe.servings=e}(e),Q.update(y.recipe)},lt=function(){var e,t;y.recipe.bookmarked?(e=y.recipe.id,t=y.bookmarks.findIndex((function(t){return t.id===e})),y.bookmarks.splice(t,1),e===y.recipe.id&&(y.recipe.bookmarked=!1),_()):w(y.recipe),Q.update(y.recipe),We.render(y.bookmarks)},ft=function(){We.render(y.bookmarks)},pt=function(){var e=it(regeneratorRuntime.mark((function e(t){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,rt.renderSpinner(),e.next=4,O(t);case 4:Q.render(y.recipe),rt.renderMessage(),We.render(y.bookmarks),window.history.pushState(null,"","#".concat(y.recipe.id)),setTimeout((function(){rt.toogleWindow()}),3e3),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),rt.renderError(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}();We.addHandlerRender(ft),Q.addHandlerRender(at),Q.addHandlerUpdateServings(st),Q.addHandlerAddBookmark(lt),Y.addHandlerSearch(ct),Fe.addHandlerClick(ut),rt._addHandlerUpload(pt)}();
//# sourceMappingURL=controller.51faebf0.js.map
